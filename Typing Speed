
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type speed</title>
    
</head>
<body>
    <div class="maindiv">
        <div class="centerdiv">
            <h1>Welcome To Typing Speed Test.</h1>

            <h2 id="so_msg"></h2>
            
            <textarea  id="type_words" cols="100" rows="10" placeholder="Write a word here..."></textarea> <br>

            <button id="btn" class="mainbtn">Start</button>
        </div>
    </div>

    <script>
        set_of_words = [
            "My name is Abhishek kumar.",
            "Hope you are having fun this is a simple game you can make.",
            "This is typing speed measuring app. ",
            "If this app calculate approximate typing speed."
        ];

        let so_msg = document.getElementById('so_msg');
        let type_words = document.getElementById('type_words');
        let btn = document.getElementById('btn');
        let starttime , endTime;
   
         let playgame = () => {
            let randomnum = Math.floor(Math.random()* set_of_words.length);
            so_msg.innerText = set_of_words[randomnum] ;
            let date = new Date();
            starttime = date.getTime();
            btn.innerText = 'Done';

         }

         let  endPlay = () =>{
            let date = new Date();
            endTime = date.getTime();
            let TotalTime = ((endTime-starttime)/1000);
            console.log(TotalTime);
            let totalstr = type_words.value;
            let wordCount = wordcounter(totalstr);

            let speed = Math.floor((wordCount/TotalTime)*60);
            let finalMsg = "You typed total at "+ speed + " word per minutes ";
            finalMsg += comparewords(so_msg.innerText ,totalstr );
            so_msg.innerText = finalMsg;

         };

         let comparewords=(str1,str2)=>{
              let words1 = str1.split(" ");
              let words2 = str2.split(" ");
              let cnt = 0;

            //   --arrayName.then.foreach.than.it will take whole funtion with value & index no of that array.

            // words1.forEach( (item,index) => {
            //   if (item == words2[index]){
            //     cnt++;
            //   }  
            // });

            for (i=0;i<words1.length;i++){
                 for (n=0;n<words2.length;n++){
                    if (words1[i]== words2[n]){
                        cnt++;
                    }
                 }
            }

            let errorwords = (words1.length - cnt);
            
            return(cnt + " correct out of " + words1.length + " words & the total number of error are " + errorwords + " .");

         }

         let wordcounter = (str) => {
            let response = str.split(" ").length;
            console.log(response); 
            return response;
          
            
         }

        btn.addEventListener('click',function(){
          
            if(this.innerText =='Start'){
                set_of_words.disable = false;
                playgame();
            } else if(btn.innerText == "Done"){
                set_of_words.disable = true;
                btn.innerText = "Start";
                endPlay();
            }
            
        })
        

    </script>
</body>
</html>
